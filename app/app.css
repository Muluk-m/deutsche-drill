@import "tailwindcss" source(".");

@theme {
  --font-sans: "Inter", ui-sans-serif, system-ui, sans-serif,
    "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";

  /* 自定义动画 */
  --animate-shimmer: shimmer 2s infinite;

  @keyframes shimmer {
    0% {
      background-position: -1000px 0;
    }
    100% {
      background-position: 1000px 0;
    }
  }
}

html,
body {
  @apply bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-gray-950 dark:via-slate-900 dark:to-gray-950;
  min-height: 100vh;

  @media (prefers-color-scheme: dark) {
    color-scheme: dark;
  }
}

/* ========== 动画定义 ========== */

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideInDown {
  from {
    opacity: 0;
    transform: translateY(-20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes bounce {
  0%,
  100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-10px);
  }
}

@keyframes pulse {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0.7;
  }
}

@keyframes shimmer {
  0% {
    background-position: -1000px 0;
  }
  100% {
    background-position: 1000px 0;
  }
}

@keyframes wiggle {
  0%,
  100% {
    transform: rotate(0deg);
  }
  25% {
    transform: rotate(-3deg);
  }
  75% {
    transform: rotate(3deg);
  }
}

/* 动画类 */
.animate-fadeIn {
  animation: fadeIn 0.4s ease-out;
}

.animate-slideInUp {
  animation: slideInUp 0.5s ease-out;
}

.animate-slideInDown {
  animation: slideInDown 0.5s ease-out;
}

.animate-scaleIn {
  animation: scaleIn 0.3s ease-out;
}

.animate-bounce-once {
  animation: bounce 0.6s ease-in-out;
}

.animate-pulse-slow {
  animation: pulse 2s ease-in-out infinite;
}

.animate-shimmer {
  animation: shimmer 2s infinite;
  background: linear-gradient(
    90deg,
    rgba(255, 255, 255, 0) 0%,
    rgba(255, 255, 255, 0.5) 50%,
    rgba(255, 255, 255, 0) 100%
  );
  background-size: 1000px 100%;
}

.animate-wiggle {
  animation: wiggle 0.5s ease-in-out;
}

/* ========== 玻璃态效果 ========== */

.glass {
  background: rgba(255, 255, 255, 0.7);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.3);
}

.glass-dark {
  background: rgba(30, 30, 30, 0.7);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

/* ========== 渐变文本 ========== */

.gradient-text {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.gradient-text-blue {
  background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.gradient-text-green {
  background: linear-gradient(135deg, #10b981 0%, #059669 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

/* ========== 卡片效果 ========== */

.card {
  @apply bg-white dark:bg-gray-800 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300;
}

.card-interactive {
  @apply bg-white dark:bg-gray-800 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300;
  @apply hover:-translate-y-1 active:scale-95 cursor-pointer;
}

.card-gradient {
  @apply bg-gradient-to-br from-white to-blue-50 dark:from-gray-800 dark:to-gray-900;
  @apply rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300;
}

/* ========== 按钮增强 ========== */

.btn-primary {
  @apply bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700;
  @apply text-white font-semibold py-3 px-6 rounded-xl shadow-lg hover:shadow-xl;
  @apply transition-all duration-300 active:scale-95;
}

.btn-secondary {
  @apply bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300;
  @apply font-medium py-3 px-6 rounded-xl shadow-md hover:shadow-lg;
  @apply transition-all duration-300 active:scale-95;
  @apply border border-gray-200 dark:border-gray-700;
}

.btn-success {
  @apply bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700;
  @apply text-white font-semibold py-3 px-6 rounded-xl shadow-lg hover:shadow-xl;
  @apply transition-all duration-300 active:scale-95;
}

.btn-danger {
  @apply bg-gradient-to-r from-red-500 to-pink-600 hover:from-red-600 hover:to-pink-700;
  @apply text-white font-semibold py-3 px-6 rounded-xl shadow-lg hover:shadow-xl;
  @apply transition-all duration-300 active:scale-95;
}

/* ========== 输入框增强 ========== */

.input-enhanced {
  @apply w-full px-4 py-3 rounded-xl;
  @apply bg-white dark:bg-gray-800;
  @apply border-2 border-gray-200 dark:border-gray-700;
  @apply focus:border-blue-500 dark:focus:border-blue-400 focus:outline-none focus:ring-4 focus:ring-blue-500/20;
  @apply text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500;
  @apply transition-all duration-200;
}

/* ========== 徽章和标签 ========== */

.badge {
  @apply inline-flex items-center px-3 py-1 rounded-full text-sm font-medium;
}

.badge-blue {
  @apply inline-flex items-center px-3 py-1 rounded-full text-sm font-medium;
  @apply bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300;
}

.badge-green {
  @apply inline-flex items-center px-3 py-1 rounded-full text-sm font-medium;
  @apply bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300;
}

.badge-purple {
  @apply inline-flex items-center px-3 py-1 rounded-full text-sm font-medium;
  @apply bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300;
}

.badge-red {
  @apply inline-flex items-center px-3 py-1 rounded-full text-sm font-medium;
  @apply bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300;
}

.badge-orange {
  @apply inline-flex items-center px-3 py-1 rounded-full text-sm font-medium;
  @apply bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300;
}

/* ========== 进度条效果 ========== */

.progress-bar {
  @apply relative overflow-hidden rounded-full h-3 bg-gray-200 dark:bg-gray-700;
}

.progress-bar-fill {
  @apply h-full rounded-full transition-all duration-500 ease-out;
  @apply bg-gradient-to-r from-blue-500 to-purple-600;
}

.progress-bar-fill::after {
  content: "";
  @apply absolute inset-0 animate-shimmer;
}

/* ========== 移动端优化 ========== */

@media (max-width: 640px) {
  input[type="text"] {
    font-size: 16px; /* 防止 iOS 自动缩放 */
  }
}

/* 防止点击高亮 */
* {
  -webkit-tap-highlight-color: transparent;
}

/* 优化移动端按钮点击体验 */
button {
  touch-action: manipulation;
  -webkit-user-select: none;
  user-select: none;
}

/* ========== iOS Safe Area 适配 ========== */

/* 安全区域 padding */
.safe-area-bottom {
  padding-bottom: env(safe-area-inset-bottom, 0);
}

.safe-area-top {
  padding-top: env(safe-area-inset-top, 0);
}

.safe-area-left {
  padding-left: env(safe-area-inset-left, 0);
}

.safe-area-right {
  padding-right: env(safe-area-inset-right, 0);
}

/* 底部导航内容区域适配 - 为底部导航预留空间 */
/* 注意：BottomNav 组件本身会处理 safe-area-inset-bottom，这里只需预留导航栏高度 */
.pb-nav {
  padding-bottom: calc(4rem + 1rem); /* 4rem = h-16 导航栏高度, 1rem = 额外间距 */
}

/* Fixed/Sticky 元素的安全区域适配 */
/* 顶部固定元素：增加上边距以适配刘海屏 */
.fixed-top-safe,
header.safe-area-top {
  top: env(safe-area-inset-top, 0);
}

/* 底部固定元素：使用 bottom 定位时考虑安全区域 */
.fixed-bottom-safe {
  bottom: env(safe-area-inset-bottom, 0);
}

/* 全屏页面顶部内边距 */
.pt-safe {
  padding-top: env(safe-area-inset-top, 0);
}

/* 底部 sticky footer 需要在底部加 padding 而非调整位置 */
footer.safe-area-bottom {
  padding-bottom: env(safe-area-inset-bottom, 0);
}

/* 底部固定导航：内部增加 padding 以保证内容不被遮挡 */
nav.safe-area-bottom {
  padding-bottom: env(safe-area-inset-bottom, 0);
}

/* 隐藏滚动条但保留滚动功能 */
.scrollbar-hide {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

.scrollbar-hide::-webkit-scrollbar {
  display: none;
}

/* ========== 自定义滚动条 ========== */

::-webkit-scrollbar {
  width: 10px;
  height: 10px;
}

::-webkit-scrollbar-track {
  background: rgba(243, 244, 246, 0.5);
  border-radius: 5px;
}

::-webkit-scrollbar-thumb {
  background: linear-gradient(180deg, #a5b4fc 0%, #818cf8 100%);
  border-radius: 5px;
  transition: background 0.3s;
}

::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(180deg, #818cf8 0%, #6366f1 100%);
}

/* 深色模式滚动条 */
@media (prefers-color-scheme: dark) {
  ::-webkit-scrollbar-track {
    background: rgba(31, 41, 55, 0.5);
  }

  ::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, #4f46e5 0%, #4338ca 100%);
  }

  ::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(180deg, #6366f1 0%, #4f46e5 100%);
  }
}

/* ========== 特殊效果 ========== */

/* 悬浮时的光晕效果 */
.glow-on-hover {
  position: relative;
  transition: all 0.3s;
}

.glow-on-hover:hover {
  filter: drop-shadow(0 0 20px rgba(99, 102, 241, 0.5));
}

/* 成功动画 */
.success-pulse {
  animation: pulse 0.5s ease-in-out;
}

/* 错误抖动动画 */
.error-shake {
  animation: wiggle 0.5s ease-in-out;
}

/* ========== 深色模式文本优化 ========== */

@media (prefers-color-scheme: dark) {
  .text-gray-800 {
    @apply text-gray-100;
  }

  .text-gray-700 {
    @apply text-gray-200;
  }

  .text-gray-600 {
    @apply text-gray-300;
  }
}
